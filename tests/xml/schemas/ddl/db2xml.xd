<schema name="#$dbname#" xmlns:xar="http://xaraya.com/2004/blocklayout">
  <xar:foreach in="$tables" value="$table">
    <table name="#$table:getName()#">
      <xar:foreach in="#$table:getColumns()#" value="$column">
        <column name="#$column:getName()#">
          <!-- Determine the required and auto attribute and add these to the column tag -->
          <xar:attribute name="required">#!$column:isNullable()?'true':'false'#</xar:attribute>
          <xar:attribute name="auto">#$column:isAutoIncrement()?'true':'false'#</xar:attribute>
          <xar:if condition="#$types[$column:getType()] == 'boolean'#">
            <boolean>
              <xar:attribute name="default">#$column:getDefaultValue()#</xar:attribute>
            </boolean>
          <xar:elseif condition="#$types[$column:getType()] == 'number'#"/>
            <number>
              <!-- Size should be easy, if creole has done it's job. No number without size -->
              <xar:attribute name="size">#$column:getSize()#</xar:attribute>

              <!-- This aint right, default value '' is valid but different from no default -->
              <xar:attribute name="default">#$column:getDefaultValue()#</xar:attribute>

              <!-- We call scale decimals -->
              <xar:attribute name="decimals">#$column:getScale()?$column:getScale():0#</xar:attribute>
            </number>
          <xar:elseif condition="#$types[$column:getType()] == 'text'#"/>
            <text>
              <xar:attribute name="size">#$column:getSize()#</xar:attribute>
            </text>
          <xar:elseif condition="#$types[$column:getType()] == 'time'#"/>
            <!-- well, yes, this originates from date, timestamp and other date related values -->
            <!-- for now, we just copy the size attribute -->
            <time>
              <xar:attribute name="size">#$column:getSize()#</xar:attribute>
            </time>
          <xar:elseif condition="#$types[$column:getType()] == 'binary'#"/>
            <binary />
          </xar:if>
          <description/>
        </column>
      </xar:foreach>
    </table>
  </xar:foreach>
</schema>