<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<div class="xar-mod-body">
    <fieldset>
        <legend>
            <xar:ml>
                <xar:mlstring>
                    #(1) List 
                </xar:mlstring>
                <xar:mlvar>
                    #$itemtypename#
                </xar:mlvar>
            </xar:ml>
        </legend>

        <xar:if condition="!empty($message)">
            <p>#xarVarPrepForDisplay($message)#</p>
        <xar:else />
            <table width="100%" border="0" cellspacing="0" cellpadding="2">
                <tr>
                    <th>
                        <xar:mlstring>Name</xar:mlstring>
                    </th>
                    <th>
                        <xar:mlstring>Created</xar:mlstring>
                    </th>
                    <th>
                        <xar:mlstring>Description</xar:mlstring>
                    </th>
                </tr>
                <xar:loop name="$items">
                    <xar:if condition="(($loop:index + 1) % 2)">
                        <xar:set name="item_class">'xar-norm'</xar:set>
                    <xar:else/>
                        <xar:set name="item_class">'xar-accent'</xar:set>
                    </xar:if>

                    <tr class="#$item_class#">
                        <td>
                            #$loop:item['name']#
                        </td>
                        <xar:set name="uid">#$loop:item['uid']#</xar:set>
                        <xar:foreach in="$objectlists" value="$list">
                            <xar:set name="items">$list->items</xar:set>
                            <xar:set name="properties">$list->getProperties()</xar:set>
                            <xar:if condition="isset($items[$uid]['description'])">
                                <td>
                                    <xar:data-output property="$properties['description']" value="$items[$uid]['description']" />
                                </td>
                            </xar:if>
                            <xar:if condition="isset($items[$uid]['created'])">
                                <td>
                                    <xar:data-output property="$properties['created']" value="$items[$uid]['created']" />
                                </td>
                            </xar:if>
                        </xar:foreach>                        
                    </tr>
                </xar:loop>
            </table>

            <!-- add the pager here -->
            <div class="xar-align-center">#$pager#</div>
        </xar:if>
    </fieldset>
</div>
